{% block positibe_image_widget %}
    <link href="{{ asset('bundles/positibecmf/jquery-file-upload/css/file-upload.all.min.css') }}" rel="stylesheet"
          type="text/css"/>

    <div class="fileupload fileupload-new row" data-provides="fileupload">
        <div class="col-xs-4">
            <div class="fileupload-preview fileupload-exists thumbnail"
                 style="max-width: 150px; max-height: 150px; line-height: 20px;">
                <img src="{{ (value is not empty and value.id ? (value.path | imagine_filter('image_thumbnail')) : asset('bundles/positibemedia/images/avatar.png')) }}">
            </div>

            <div class="btn btn-info btn-sm fileinput-button" style="margin-bottom: 10px">
                <i class="fa fa-paperclip"></i>
                {{ 'input.upload' | trans({}, 'PositibeMediaBundle') }}
                {{ form_widget(form.binaryContent, {'required':false, 'attr': {'style': 'cursor: pointer;' }}) }}
            </div>
            <div class="input-sm btn-file-remove">
                <div class="md-checkbox has-error">
                    {{ form_widget(form.unlink) }}
                </div>
            </div>

        </div>

    </div>
{% endblock positibe_image_widget %}

{% block positibe_media_widget %}
    <link href="{{ asset('bundles/positibecmf/jquery-file-upload/css/file-upload.all.min.css') }}" rel="stylesheet"
          type="text/css"/>
    {% set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' fileupload fileupload-new')|trim}) %}

    <div {{ block('widget_attributes') }} data-provides="fileupload">
        <div class="row">
            <div class="col-xs-4">
                <div class="fileupload-preview fileupload-exists thumbnail"
                     style="max-width: 100%; height: 30px; line-height: 20px; margin-bottom: 0">
                    {% if value is not empty and value.id %}{{ value.metadata['filename'] }}{% endif %}
                </div>
            </div>
            <div class="col-xs-4">
                <div class="btn btn-info btn-sm fileinput-button">
                    <i class="fa fa-paperclip"></i>
                    {{ 'input.upload' | trans({}, 'PositibeMediaBundle') }}
                    {{ form_widget(form.binaryContent, {'required':false, 'attr': {'style': 'cursor: pointer;' }}) }}

                </div>

            </div>
            <div class="col-xs-4 ">
                {{ form_widget(form.unlink) }}
            </div>
        </div>
    </div>
{% endblock positibe_media_widget %}

{% block positibe_gallery_widget %}
    <div class="tab-pane" id="form_publication_tab_image">
        <div class="form-group">
            <div class="pull-right">
                <a href="#" class="btn btn-xs green-haze form-collections-add_button"
                   data-target="form_collection_type_gallery_{{ form.vars.id }}"><i class="fa fa-plus"></i> AÃ±adir una
                    archivo
                </a>
            </div>
            {{ form_errors(form.gallery_has_medias) }}
        </div>
        <div id="form_collection_type_gallery_{{ form.vars.id }}" class="nav"
             data-count="{{ form.gallery_has_medias | length }}"
             data-prototype="{{ form_widget(form.gallery_has_medias.vars.prototype)|e }}">
            {% for media in form.gallery_has_medias %}
                {{ form_errors(media) }}
                {{ form_widget(media) }}
            {% endfor %}
        </div>
        <div style="display: none">{{ form_widget(form.gallery_has_medias) }}</div>
    </div>
{% endblock %}

{% block positibe_gallery_has_media_widget %}
    <hr>
    <div id={{ id }}>
        <div class="form-group form-md-line-input ">
            <div class="col-sm-4">
                {{ block('positibe_image_type_small_widget') }}
            </div>
            <div class="col-sm-6">
                {{ form_row(form.title) }}
                {{ form_row(form.body) }}
            </div>
            <div class="col-sm-2">
                <div class="col-xs-2 text-right">
                    <a class="btn btn-sm btn-danger form-collection-remove-button"
                       data-target="{{ form.vars.id }}">
                        <i class="fa fa-trash"></i> Eliminar</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block positibe_image_type_small_widget %}
    {% set form = form.media %}
    <link href="{{ asset('bundles/positibecmf/jquery-file-upload/css/file-upload.all.min.css') }}" rel="stylesheet"
          type="text/css"/>
    <style>
        .fileupload .thumbnail > img {
            max-width: 60px;
            max-height: 60px;
        }
    </style>
    <div class="fileupload fileupload-new row" data-provides="fileupload">
        <div class="col-xs-12">
            {% if value is not null and value.media.providerName == 'positibe_orm_media.media_provider' %}
                <div class="fileupload-preview fileupload-exists thumbnail" style="line-height: 20px; width: auto">
                    {{ value.media }}
                </div>
            {% else %}
                <div class="fileupload-preview fileupload-exists thumbnail"
                     style="line-height: 20px; width: auto">
                    <img src="{{ (value is not empty ? form.vars.data.path | imagine_filter('image_thumbnail') : asset('bundles/positibemedia/images/avatar.png')) }}"
                         title="{{ (value is not empty ? value.media.name : '') }}">
                </div>
            {% endif %}
            <div class="btn btn-info btn-sm fileinput-button">
                <i class="fa fa-paperclip"></i>
                {{ 'input.upload' | trans({}, 'PositibeMediaBundle') }}
                {{ form_widget(form.binaryContent, {'required':false, 'attr': {'style': 'cursor: pointer;' }}) }}
            </div>
        </div>

    </div>
{% endblock %}